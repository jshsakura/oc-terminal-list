import{c as j,r as s,j as e}from"./index-Bu9V4qqL.js";import{F as w}from"./file-DVPjf7FT.js";import{X as z}from"./x-6Zl4r22J.js";/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],F=j("pen",m);/**
 * @license lucide-react v0.560.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],E=j("save",I),M=({filePath:r,onClose:k,theme:o})=>{const[u,x]=s.useState(""),[p,l]=s.useState(!1),[g,f]=s.useState(!0),[d,y]=s.useState(!1),[b,i]=s.useState(null);s.useEffect(()=>{r&&h()},[r]);const h=async()=>{f(!0),i(null);try{const n=localStorage.getItem("auth_token"),a=await fetch(`/api/files/read?path=${encodeURIComponent(r)}`,{headers:{Authorization:`Bearer ${n}`}});if(!a.ok){const S=await a.json();throw new Error(S.detail||"Failed to load file")}const c=await a.json();x(c.content)}catch(n){console.error("Failed to load file:",n),i(n.message)}finally{f(!1)}},v=async()=>{y(!0),i(null);try{const n=localStorage.getItem("auth_token"),a=await fetch("/api/files/write",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify({path:r,content:u})});if(!a.ok){const c=await a.json();throw new Error(c.detail||"Failed to save file")}l(!1)}catch(n){console.error("Failed to save file:",n),i(n.message)}finally{y(!1)}},C=()=>{h(),l(!1)};return r?e.jsxs("div",{style:{...t.container,backgroundColor:o.ui.bg},children:[e.jsxs("div",{style:{...t.header,backgroundColor:o.ui.bgSecondary,borderBottomColor:o.ui.border},children:[e.jsxs("div",{style:t.headerLeft,children:[e.jsx(w,{size:14,style:{color:o.ui.accent}}),e.jsx("span",{style:{...t.filePath,color:o.ui.text},children:r})]}),e.jsxs("div",{style:t.headerRight,children:[p?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:v,disabled:d,style:{...t.button,backgroundColor:o.green,color:o.ui.bg},children:[e.jsx(E,{size:14}),e.jsx("span",{children:d?"저장 중...":"저장"})]}),e.jsx("button",{onClick:C,disabled:d,style:{...t.button,backgroundColor:o.brightBlack,color:o.ui.text},children:"취소"})]}):e.jsxs("button",{onClick:()=>l(!0),style:{...t.button,backgroundColor:o.ui.bgTertiary,color:o.ui.text},disabled:g,children:[e.jsx(F,{size:14}),e.jsx("span",{children:"편집"})]}),e.jsxs("button",{onClick:k,style:{...t.button,backgroundColor:o.red,color:o.ui.bg},children:[e.jsx(z,{size:14}),e.jsx("span",{children:"닫기"})]})]})]}),e.jsx("div",{style:t.content,children:g?e.jsx("div",{style:{...t.message,color:o.ui.textSecondary},children:"불러오는 중..."}):b?e.jsx("div",{style:{...t.message,color:o.red},children:b}):e.jsx("textarea",{style:{...t.textarea,backgroundColor:o.ui.bgSecondary,color:o.ui.text,borderColor:o.ui.border},value:u,onChange:n=>x(n.target.value),readOnly:!p,spellCheck:!1})})]}):null},t={container:{position:"absolute",top:"36px",left:0,right:0,bottom:0,display:"flex",flexDirection:"column",backgroundColor:"#1e1e2e",zIndex:100},header:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",backgroundColor:"#181825",borderBottom:"1px solid #313244",gap:"12px"},headerLeft:{display:"flex",alignItems:"center",gap:"8px",flex:1,minWidth:0},filePath:{fontSize:"12px",fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",color:"#cdd6f4"},headerRight:{display:"flex",gap:"6px",alignItems:"center",flexShrink:0},button:{display:"flex",alignItems:"center",gap:"4px",padding:"6px 10px",fontSize:"11px",fontWeight:"500",border:"none",borderRadius:"2px",cursor:"pointer",transition:"opacity 0.15s ease"},content:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},textarea:{flex:1,width:"100%",padding:"12px",backgroundColor:"#181825",color:"#cdd6f4",border:"none",outline:"none",fontFamily:'"JetBrains Mono", monospace',fontSize:"13px",lineHeight:"1.6",resize:"none",overflow:"auto"},message:{padding:"20px",textAlign:"center",fontSize:"14px"}};export{M as default};
