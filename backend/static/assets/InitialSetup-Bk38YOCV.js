import{u as w,r as n,j as e}from"./index-za143ZV_.js";const v=({onComplete:x,language:h="en"})=>{const{t:r}=w(h),[d,f]=n.useState(""),[i,m]=n.useState(""),[c,g]=n.useState(""),[p,s]=n.useState(""),[a,u]=n.useState(!1),y=async o=>{if(o.preventDefault(),s(""),d.length<3){s(r("usernameMinLength")||"Username must be at least 3 characters");return}if(i.length<8){s(r("passwordMinLength")||"Password must be at least 8 characters");return}if(i!==c){s(r("passwordMismatch")||"Passwords do not match");return}u(!0);try{const l=await fetch("/api/auth/setup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:d,password:i})}),b=await l.json();if(!l.ok)throw new Error(b.detail||"Setup failed");x()}catch(l){s(l.message||"Failed to create admin account")}finally{u(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("style",{children:`
        .initial-setup-overlay::-webkit-scrollbar,
        .initial-setup-container::-webkit-scrollbar {
          display: none;
        }
      `}),e.jsx("div",{style:t.overlay,className:"initial-setup-overlay",children:e.jsxs("div",{style:t.container,className:"initial-setup-container",children:[e.jsx("div",{style:t.header,children:e.jsx("div",{style:t.icon,children:e.jsxs("svg",{width:"120",height:"120",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",children:[e.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2"}),e.jsx("path",{d:"M7 10l3 3-3 3"}),e.jsx("line",{x1:"13",y1:"16",x2:"17",y2:"16"})]})})}),e.jsxs("form",{onSubmit:y,style:t.form,children:[e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:r("username")||"Username"}),e.jsx("input",{type:"text",value:d,onChange:o=>f(o.target.value),style:t.input,placeholder:r("usernamePlaceholder")||"Enter username",disabled:a,autoFocus:!0,required:!0})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:r("password")||"Password"}),e.jsx("input",{type:"password",value:i,onChange:o=>m(o.target.value),style:t.input,placeholder:r("passwordPlaceholder")||"Enter password (min 8 characters)",disabled:a,required:!0})]}),e.jsxs("div",{style:t.formGroup,children:[e.jsx("label",{style:t.label,children:r("confirmPassword")||"Confirm Password"}),e.jsx("input",{type:"password",value:c,onChange:o=>g(o.target.value),style:t.input,placeholder:r("confirmPasswordPlaceholder")||"Re-enter password",disabled:a,required:!0})]}),p&&e.jsx("div",{style:t.error,children:p}),e.jsx("button",{type:"submit",style:t.submitBtn,disabled:a,children:a?r("creating")||"Creating...":r("createAccount")||"Create Administrator"})]}),e.jsx("div",{style:t.footer,children:e.jsx("p",{style:t.footerText,children:r("setupFooter")||"This account will have full access to all terminals and settings."})})]})})]})},t={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#282a36",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e4,overflow:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},container:{backgroundColor:"#1e1f29",borderRadius:"12px",width:"90%",maxWidth:"420px",padding:"40px",border:"1px solid #44475a",margin:"20px auto",maxHeight:"calc(100vh - 40px)",overflowY:"auto",scrollbarWidth:"none",msOverflowStyle:"none"},header:{textAlign:"center",marginBottom:"32px"},icon:{color:"#bd93f9",margin:"0 auto"},form:{display:"flex",flexDirection:"column",gap:"20px"},formGroup:{display:"flex",flexDirection:"column",gap:"8px"},label:{fontSize:"14px",fontWeight:"600",color:"#f8f8f2"},input:{padding:"12px 16px",fontSize:"14px",backgroundColor:"#282a36",color:"#f8f8f2",border:"1px solid #44475a",borderRadius:"6px",outline:"none",transition:"border-color 0.2s"},error:{padding:"12px 16px",backgroundColor:"#ff5555",color:"#f8f8f2",borderRadius:"6px",fontSize:"14px",textAlign:"center"},submitBtn:{padding:"14px 24px",backgroundColor:"#50fa7b",color:"#282a36",border:"none",borderRadius:"6px",fontSize:"16px",fontWeight:"700",cursor:"pointer",transition:"all 0.2s ease",marginTop:"8px"},footer:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid #44475a"},footerText:{margin:0,fontSize:"12px",color:"#6272a4",textAlign:"center",lineHeight:"1.6"}};export{v as default};
